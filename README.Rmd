---
title: "R to D3 rendering tools"
output:
  github_document:
    fig_width: 9
    fig_height: 5
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.path = "tools/README/", dev = "png")
```

<img src="tools/README/r2d3-hex.svg" width=200 align="right"/>

`R2D3` provides tools to render D3 scripts from R and integrates with `knitr`, `rmarkdown` and RStudio to provide native `d3` output chunks. Specifically, with `R2D3` you can:

- Render [D3](https://d3js.org/) scripts with ease in R as [htmlwidgets](https://www.htmlwidgets.org/).
- Use [Shiny](http://shiny.rstudio.com/) with `R2D3` to create interactive D3 applications.

## Installation

Install this package by running:

```{r eval=FALSE}
devtools::install_github("rstudio/r2d3")
```

## Getting Started

To render simple D3 scripts, `R2D3` provides the following variables:

- **data**: The R data converted to javascript.
- **svg**: The svg element with the right dimensions.
- **width/height**: The width/height of the svg.
- **options**: Additional options provided from R.

These variables can then be used in a D3 script as follows:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/barchart/barchart.js", package = "r2d3")), collapse = "\n"))
```

Finally, this D3 script can be rendered from R by calling `r2d3` with the data and D3 script to be rendered:

```{r eval=FALSE}
r2d3::r2d3(
  c(10, 30, 40, 35, 20, 10),
  "inst/samples/barchart/barchart.js"
)
```
![](tools/README/barchart-1.png)

## Advanced Rendering

More advanced scripts can rely can make use of `r2d3.onRender()` which is similar to `d3.csv()`, `d3.json()`, and other D3 data loading libraries, to trigger specific code during render and use the rest of the code as initialization code, for instace:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/bubbles/bubbles.js", package = "r2d3")), collapse = "\n"))
```

```{r bubbleschart}
flares <- read.csv("inst/samples/bubbles/flare.csv")
r2d3::r2d3(
  flares[!is.na(flares$value), ],
  "inst/samples/bubbles/bubbles.js",
  version = 4
)
```