---
title: "D3 rendering for R"
output:
  github_document:
    fig_width: 9
    fig_height: 5
---

Install this package by running:

```{r eval=FALSE}
devtools::install_github("rstudio/d3")
```

Lets start with a static D3 script:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/barchart-static.js", package = "d3")), collapse = "\n"))
```

This can be rendered using:

```{r eval=FALSE}
library(d3)
d3_render(script = system.file("samples/barchart-static.js", package = "d3"))
```
![](tools/README/d3-static.png)

While this is helpful, data is usually not static, in `D3`, one can download JSON data using:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/barchart-json.js", package = "d3")), collapse = "\n"))
```

This file can be rendered as well by the same command for this file:

```{r eval=FALSE}
d3_render(script = system.file("samples/barchart-json.js", package = "d3"))
```
![](tools/README/d3-static.png)

Now, what is more helpful for R users is to provide this data from R, this can be done by using `d3.r()` instead of `d3.json()` as follows:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/barchart-variable.js", package = "d3")), collapse = "\n"))
```

```{r eval=FALSE}
d3_render(
  data = c(10, 30, 40, 35, 20, 10),
  script = system.file("samples/barchart-variable.js", package = "d3"))
```
![](tools/README/d3-variable.png)

Finally, instead of providing static data, one can provide a function that provides data. Since `d3.json()` an `d3.r()` expect promises and for animations we rather need to update data continuosly, we will pass a function to `d3.r()` as follows:

```{r echo=FALSE, comment=''}
cat(paste(readLines(system.file("samples/barchart-animate.js", package = "d3")), collapse = "\n"))
```

To render an animation, we will use `d3_animate()` instead and provide a function that provide data instead of data on it's own:

```{r eval=FALSE}
d3_animate(
  function() floor(runif(6, 1, 40)),
  system.file("samples/barchart-animate.js", package = "d3")
)
```
![](tools/README/d3-animate.gif)

